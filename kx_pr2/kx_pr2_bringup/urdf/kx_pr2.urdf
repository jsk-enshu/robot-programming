<?xml version='1.0' encoding='utf-8'?>
<robot name="kx_pr2">

  <link name="base_link">
    <visual>
      <origin xyz="0.054 0 0.089" rpy="0 -0 0" />
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/base_link_mesh.stl" scale="1 1 1" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.054 0 0.089" rpy="0 -0 0" />
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/base_link_mesh.stl" scale="1 1 1" />
      </geometry>
    </collision>
    <inertial>
      <mass value="0.671312" />
      <origin xyz="0.00124 1.38911e-10 0.02081" rpy="0 -0 0" />
      <inertia ixx="0.001849" ixy="-8.30713e-06" ixz="-1.71308e-06" iyy="0.002122" iyz="1.45167e-06" izz="0.003179" />
    </inertial>
  </link>

  <link name="base_laser">
    <visual>
    </visual>
    <collision>
    </collision>
  </link>

  <joint name="base_laser_joint" type="fixed">
    <origin xyz="0.1 0 -0.0" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="base_laser"/>
  </joint>

  <link name="HEAD_LINK0">
    <visual>
      <origin xyz="-0.00725 0 0.1065" rpy="0 -0 0" />
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/HEAD_LINK0_mesh.stl" scale="1 1 1" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="-0.00725 0 0.1065" rpy="0 -0 0" />
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/HEAD_LINK0_mesh.stl" scale="1 1 1" />
      </geometry>
    </collision>
    <inertial>
      <mass value="0.037398" />
      <origin xyz="-1.73472e-18 1.22056e-18 0.023093" rpy="0 -0 0" />
      <inertia ixx="8.69139e-05" ixy="-8.96373e-22" ixz="8.61164e-09" iyy="9.09972e-05" iyz="-5.25778e-09" izz="2.5436e-05" />
    </inertial>
  </link>

  <link name="HEAD_LINK1">
    <visual>
      <origin xyz="0 0 0.036" rpy="0 -0 0" />
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/HEAD_LINK1_mesh.stl" scale="1 1 1" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0.036" rpy="0 -0 0" />
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/HEAD_LINK1_mesh.stl" scale="1 1 1" />
      </geometry>
    </collision>
    <inertial>
      <mass value="0.093045" />
      <origin xyz="-0.001016 3.60351e-18 0.186465" rpy="0 -0 0" />
      <inertia ixx="0.000665" ixy="-1.79922e-07" ixz="-6.65543e-08" iyy="0.000652" iyz="-1.79583e-08" izz="0.000109" />
    </inertial>
  </link>


  <link name="LLEG_LINK0">
    <visual>
      <origin xyz="0.054 0.048 -0.065" rpy="0 -0 0"/>
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/LLEG_LINK0_mesh.stl" scale="1 1 1" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 1.5707963267948966 1.5707963267948966"/>
      <geometry>
        <cylinder radius="0.04" length="0.02"/>
      </geometry>
    </collision>

    <inertial>
      <mass value="0.095024" />
      <origin xyz="-6.93889e-18 0.016915 0" rpy="0 -0 0"/>
      <inertia ixx="0.000174" ixy="5.92949e-22" ixz="5.05172e-20" iyy="0.000173" iyz="1.9762e-20" izz="0.000262"/>
    </inertial>
  </link>
  <link name="LLEG_LINK1">
    <visual>
      <origin xyz="-0.054 0.048 -0.065" rpy="0 -0 0"/>
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/LLEG_LINK1_mesh.stl" scale="1 1 1" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 1.5707963267948966 1.5707963267948966"/>
      <geometry>
        <cylinder radius="0.04" length="0.02"/>
      </geometry>
    </collision>

    <inertial>
      <mass value="0.095024" />
      <origin xyz="-6.93889e-18 0.016915 0" rpy="0 -0 0"/>
      <inertia ixx="0.000174" ixy="5.92613e-22" ixz="5.04856e-20" iyy="0.000173" iyz="6.91669e-20" izz="0.000262"/>
    </inertial>
  </link>


  <link name="RLEG_LINK0">
    <visual>
      <origin xyz="0.054 -0.048 -0.065" rpy="0 -0 0"/>
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/RLEG_LINK0_mesh.stl" scale="1 1 1" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 1.5707963267948966 1.5707963267948966"/>
      <geometry>
        <cylinder radius="0.04" length="0.02"/>
      </geometry>
    </collision>

    <inertial>
      <mass value="0.095024" />
      <origin xyz="-6.93889e-18 0.016915 0" rpy="0 -0 0"/>
      <inertia ixx="0.000174" ixy="5.9261e-22" ixz="5.04911e-20" iyy="0.000173" iyz="-1.9762e-20" izz="0.000262"/>
    </inertial>
  </link>
  <link name="RLEG_LINK1">
    <visual>
      <origin xyz="-0.054 -0.048 -0.065" rpy="0 -0 0"/>
      <geometry>
        <mesh filename="package://kx_pr2_bringup/urdf/meshes/RLEG_LINK1_mesh.stl" scale="1 1 1" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 1.5707963267948966 1.5707963267948966"/>
      <geometry>
        <cylinder radius="0.04" length="0.02"/>
      </geometry>
    </collision>

    <inertial>
      <mass value="0.095024" />
      <origin xyz="-6.93889e-18 0.016915 0" rpy="0 -0 0"/>
      <inertia ixx="0.000174" ixy="5.93143e-22" ixz="5.05395e-20" iyy="0.000173" iyz="-3.95239e-20" izz="0.000262"/>
    </inertial>
  </link>

  <joint name="LLEG_JOINT0" type="continuous">
    <parent link="base_link"/>
    <child  link="LLEG_LINK0"/>
    <origin xyz="0.054 0.048 -0.065" rpy="0 -0 0 "/>
    <axis   xyz="0 1 0"/>
    <limit lower="-1745.33" upper="1745.33" effort="0.656248" velocity="7.47998" />
    <dynamics damping="0.2" friction="0" />
  </joint>
  <joint name="LLEG_JOINT1" type="continuous">
    <parent link="base_link"/>
    <child  link="LLEG_LINK1"/>
    <origin xyz="-0.054 0.048 -0.065" rpy="0 -0 0 "/>
    <axis   xyz="0 1 0"/>
    <limit lower="-1745.33" upper="1745.33" effort="0.656248" velocity="7.47998" />
    <dynamics damping="0.2" friction="0" />
  </joint>
  <joint name="RLEG_JOINT0" type="continuous">
    <parent link="base_link"/>
    <child  link="RLEG_LINK0"/>
    <origin xyz="0.054 -0.048 -0.065" rpy="0 -0 0 "/>
    <axis   xyz="0 1 0"/>
    <limit lower="-1745.33" upper="1745.33" effort="0.656248" velocity="7.47998" />
    <dynamics damping="0.2" friction="0" />
  </joint>
  <joint name="RLEG_JOINT1" type="continuous">
    <parent link="base_link"/>
    <child  link="RLEG_LINK1"/>
    <origin xyz="-0.054 -0.048 -0.065" rpy="0 -0 0 "/>
    <axis   xyz="0 1 0"/>
    <limit lower="-1745.33" upper="1745.33" effort="0.656248" velocity="7.47998" />
    <dynamics damping="0.2" friction="0" />
  </joint>
  <joint name="HEAD_JOINT0" type="revolute">
    <parent link="base_link" />
    <child link="HEAD_LINK0" />
    <origin xyz="-0.00725 0 0.1065" rpy="0 -0 0 " />
    <axis xyz="0 0 -1" />
    <limit lower="-2.96706" upper="2.96706" effort="0.656248" velocity="7.47998" />
    <dynamics damping="0.2" friction="0" />
  </joint>
  <joint name="HEAD_JOINT1" type="revolute">
    <parent link="HEAD_LINK0" />
    <child link="HEAD_LINK1" />
    <origin xyz="0 0 0.036" rpy="0 -0 0 " />
    <axis xyz="0 -1 0" />
    <limit lower="-2.0944" upper="2.0944" effort="0.656248" velocity="7.47998" />
    <dynamics damping="0.2" friction="0" />
  </joint>

  <gazebo reference="base_link">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>100000</kp>
    <kd>1</kd>
    <gravity>true</gravity>
    <sensor name="imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <visualize>true</visualize>
      <topic>__default_topic__</topic>
      <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
        <robotNamespace>/imu_publisher</robotNamespace>
        <topicName>imu</topicName>
        <bodyName>base_link</bodyName>
        <updateRateHZ>100.0</updateRateHZ>
        <gaussianNoise>0.0</gaussianNoise>
        <xyzOffset>0 0 0</xyzOffset>
        <rpyOffset>0 0 0</rpyOffset>
        <frameName>base_link</frameName>
      </plugin>
      <pose>0 0 0 0 0 0</pose>
    </sensor>
  </gazebo>

  <gazebo reference="base_laser">
    <sensor type="ray" name="laser">
      <pose>0 0 0 0 0 0</pose>
      <visualize>true</visualize>
      <update_rate>10</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-1.5708</min_angle>
            <max_angle>1.5708</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.1</min>
          <max>12.0</max>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin name="gazebo_ros_laser" filename="libgazebo_ros_laser.so">
        <robotNamespace>/</robotNamespace>
        <frameName>base_laser</frameName>
        <topicName>scan</topicName>
      </plugin>
    </sensor>
  </gazebo>

  <gazebo reference="HEAD_LINK0">
    <mu1>0.4</mu1>
    <mu2>0.4</mu2>
    <kp>100000</kp>
    <kd>1</kd>
  </gazebo>
  <gazebo reference="HEAD_LINK1">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>100000</kp>
    <kd>1</kd>
  </gazebo>
  <gazebo reference="LLEG_LINK0">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>100000</kp>
    <kd>1</kd>
  </gazebo>
  <gazebo reference="LLEG_LINK1">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>100000</kp>
    <kd>1</kd>
  </gazebo>
  <gazebo reference="RLEG_LINK0">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>100000</kp>
    <kd>1</kd>
  </gazebo>
  <gazebo reference="RLEG_LINK1">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>100000</kp>
    <kd>1</kd>
  </gazebo>

  <joint name="camera_joint" type="fixed">
    <origin rpy="0 0 0" xyz="-0.031 0.0125 -0.016"/>
    <parent link="HEAD_LINK1"/>
    <child link="camera_link"/>
  </joint>

  <link name="camera_link">
    <visual>
      <origin rpy="0 0 1.5707963267948966" xyz="0 0 0"/>
      <!-- <geometry> -->
      <!--   <mesh filename="package://turtlebot_description/meshes/sensors/kinect.stl"/> -->
      <!-- </geometry> -->
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <!-- <geometry> -->
      <!--   <box size="0.07271 0.27794 0.073"/> -->
      <!-- </geometry> -->
    </collision>
    <inertial>
      <mass value="0.564"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.003881243" ixy="0.0" ixz="0.0" iyy="0.000498940" iyz="0.0" izz="0.003879257"/>
    </inertial>
  </link>
  <!-- The fixed joints & links below are usually published by static_transformers launched by the OpenNi launch
       files. However, for Gazebo simulation we need them, so we add them here.
       (Hence, don't publish them additionally!) -->
  <joint name="camera_depth_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.025 0"/>
    <parent link="camera_link"/>
    <child link="camera_depth_frame"/>
  </joint>
  <link name="camera_depth_frame"/>
  <joint name="camera_depth_optical_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0 0 0"/>
    <parent link="camera_depth_frame"/>
    <child link="camera_depth_optical_frame"/>
  </joint>
  <link name="camera_depth_optical_frame"/>
  <gazebo reference="camera_link">
    <sensor name="camera" type="depth">
      <always_on>true</always_on>
      <update_rate>20.0</update_rate>
      <camera>
        <horizontal_fov>1.0471975511965976</horizontal_fov>
        <image>
          <format>B8G8R8</format>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.05</near>
          <far>8.0</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="kinect_camera_controller">
        <cameraName>camera</cameraName>
        <alwaysOn>true</alwaysOn>
        <updateRate>10</updateRate>
        <imageTopicName>rgb/image_raw</imageTopicName>
        <depthImageTopicName>depth/image_raw</depthImageTopicName>
        <pointCloudTopicName>depth/points</pointCloudTopicName>
        <cameraInfoTopicName>rgb/camera_info</cameraInfoTopicName>
        <depthImageCameraInfoTopicName>depth/camera_info</depthImageCameraInfoTopicName>
        <frameName>camera_depth_optical_frame</frameName>
        <baseline>0.1</baseline>
        <distortion_k1>0.0</distortion_k1>
        <distortion_k2>0.0</distortion_k2>
        <distortion_k3>0.0</distortion_k3>
        <distortion_t1>0.0</distortion_t1>
        <distortion_t2>0.0</distortion_t2>
        <pointCloudCutoff>0.4</pointCloudCutoff>
      </plugin>
    </sensor>
  </gazebo>

  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control"/>
    <!-- <plugin filename="libgazebo_ros_p3d.so" name="ground_truth"> -->
    <!--   <frameName>map</frameName> -->
    <!--   <bodyName>base_footprint</bodyName> -->
    <!--   <topicName>base_pose_ground_truth</topicName> -->
    <!--   <updateRate>30.0</updateRate> -->
    <!-- </plugin> -->
  </gazebo>

  <transmission name="HEAD_JOINT0_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="HEAD_JOINT0">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="HEAD_JOINT0_motor">
      <mechanicalReduction>1</mechanicalReduction>
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </actuator>
  </transmission>

  <transmission name="HEAD_JOINT1_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="HEAD_JOINT1">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="HEAD_JOINT1_motor">
      <mechanicalReduction>1</mechanicalReduction>
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </actuator>
  </transmission>

  <transmission name="RLEG_JOINT0_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="RLEG_JOINT0">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="RLEG_JOINT0_motor">
      <mechanicalReduction>1</mechanicalReduction>
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </actuator>
  </transmission>

  <transmission name="RLEG_JOINT1_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="RLEG_JOINT1">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="RLEG_JOINT1_motor">
      <mechanicalReduction>1</mechanicalReduction>
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </actuator>
  </transmission>

  <transmission name="LLEG_JOINT0_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="LLEG_JOINT0">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint
    ><actuator name="LLEG_JOINT0_motor">
    <mechanicalReduction>1</mechanicalReduction>
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </actuator>
  </transmission>

  <transmission name="LLEG_JOINT1_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="LLEG_JOINT1">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="LLEG_JOINT1_motor">
      <mechanicalReduction>1</mechanicalReduction>
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </actuator>
  </transmission>

</robot>
